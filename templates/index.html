<!DOCTYPE html>
<html>
<head>
    <title>Animal Display</title>
    <style>
        body {
            font-family: sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        #animal-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center; /* Center horizontally */
            margin-top: 20px;
        }
        .animal-item {
            width: 200px;
            height: 200px;
            margin: 10px;
            border: 1px solid #ccc;
            text-align: center;
            position: relative; /* To position the audio element */
        }
        .animal-image {
            width: 100%;
            height: 150px;
            object-fit: cover;
        }
        .animal-text {
            padding: 5px;
        }
        audio {
            position: absolute; /* Position audio within the container */
            bottom: 5px; /* Adjust as needed */
            left: 50%;
            transform: translateX(-50%); /* Center the audio */
        }

    </style>
</head>
<body>
    <h1>Animal Showcase</h1>
    <div id="animal-container">
        {% for i in range(4) %}
        <div class="animal-item">
            <!-- Updated image source -->
            <img class="animal-image" src="images/{{ image_urls[i] }}" alt="Animal Image"> 
            <div class="animal-text">
                <p>{{ animal_phrases[i] }}</p>
            </div>
            <!-- Updated audio source -->
            <audio controls autoplay> <source src="sounds/{{ audio_file }}" type="audio/wav">Your browser does not support the audio element.</audio> 
        </div>
        {% endfor %}
    </div>

    <p id="fictional-text">{{ result }}</p>  
</body>
<script>
    // JavaScript code to change images every 3 seconds

    // Get all the animal image elements
    let animalImages = document.querySelectorAll('.animal-image');
    // Get the animal texts
    let animalTexts = document.querySelectorAll('.animal-text p');

    function updateAnimalDisplay() {
        // Select random image and texts from the array
        let randomIndexes = [];
        while (randomIndexes.length < 4){
            let randomNumber = Math.floor(Math.random() * 16);
            if(randomIndexes.indexOf(randomNumber) == -1){
                randomIndexes.push(randomNumber);
            }
        }
        animalImages.forEach(function (image,index) {
            let newIndex = randomIndexes[index];

            image.src = `{{ image_urls[newIndex%4] }}`;
            // Assuming you have an array of phrases called animal_phrases
            animalTexts[index].textContent = `{{ animal_phrases[newIndex] }}`;
        })
    }

    // Initial update
    updateAnimalDisplay();

    // Update every 3 seconds
    setInterval(updateAnimalDisplay, 3000);

    
</script>
</html>
